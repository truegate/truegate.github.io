<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans,en,zh-hk,default">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="消息中间件产品知识                                                                                                                  /**  * prism.js Github theme based on GitHub&apos;s theme.  * @auth">
<meta name="keywords" content="生活, 学习, 时代, 感悟, 原创博客">
<meta property="og:type" content="article">
<meta property="og:title" content="年华易逝 活在当下">
<meta property="og:url" content="http://yoursite.com/2018/04/19/消息队列产品知识/index.html">
<meta property="og:site_name" content="年华易逝 活在当下">
<meta property="og:description" content="消息中间件产品知识                                                                                                                  /**  * prism.js Github theme based on GitHub&apos;s theme.  * @auth">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://chuantu.biz/t6/289/1524123900x-1404750322.png">
<meta property="og:image" content="http://chuantu.biz/t6/289/1524123928x-1404750322.png">
<meta property="og:image" content="http://chuantu.biz/t6/289/1524123970x-1404750322.png">
<meta property="og:image" content="http://chuantu.biz/t6/289/1524124000x-1404750322.png">
<meta property="og:image" content="http://chuantu.biz/t6/289/1524124018x-1404750322.png">
<meta property="og:updated_time" content="2018-04-19T10:56:01.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="年华易逝 活在当下">
<meta name="twitter:description" content="消息中间件产品知识                                                                                                                  /**  * prism.js Github theme based on GitHub&apos;s theme.  * @auth">
<meta name="twitter:image" content="http://chuantu.biz/t6/289/1524123900x-1404750322.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/04/19/消息队列产品知识/"/>





  <title> | 年华易逝 活在当下</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta custom-logo">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">年华易逝 活在当下</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">一个记录生活点滴、关注时代发展的杂文博客</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/19/消息队列产品知识/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="大钳子">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="年华易逝 活在当下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline"></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-19T18:55:58+08:00">
                2018-04-19
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/04/19/消息队列产品知识/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/04/19/消息队列产品知识/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <!DOCTYPE html>
  <html>
    <head>
      <title>消息中间件产品知识</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css">
      
      
      
      
      
      
      
      
      
      

      <style> 
      /**
 * prism.js Github theme based on GitHub's theme.
 * @author Sam Clarke
 */
code[class*="language-"],
pre[class*="language-"] {
  color: #333;
  background: none;
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.4;

  -moz-tab-size: 8;
  -o-tab-size: 8;
  tab-size: 8;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  padding: .8em;
  overflow: auto;
  /* border: 1px solid #ddd; */
  border-radius: 3px;
  /* background: #fff; */
  background: #f5f5f5;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
  background: #f5f5f5;
}

.token.comment,
.token.blockquote {
  color: #969896;
}

.token.cdata {
  color: #183691;
}

.token.doctype,
.token.punctuation,
.token.variable,
.token.macro.property {
  color: #333;
}

.token.operator,
.token.important,
.token.keyword,
.token.rule,
.token.builtin {
  color: #a71d5d;
}

.token.string,
.token.url,
.token.regex,
.token.attr-value {
  color: #183691;
}

.token.property,
.token.number,
.token.boolean,
.token.entity,
.token.atrule,
.token.constant,
.token.symbol,
.token.command,
.token.code {
  color: #0086b3;
}

.token.tag,
.token.selector,
.token.prolog {
  color: #63a35c;
}

.token.function,
.token.namespace,
.token.pseudo-element,
.token.class,
.token.class-name,
.token.pseudo-class,
.token.id,
.token.url-reference .token.variable,
.token.attr-name {
  color: #795da3;
}

.token.entity {
  cursor: help;
}

.token.title,
.token.title .token.punctuation {
  font-weight: bold;
  color: #1d3e81;
}

.token.list {
  color: #ed6a43;
}

.token.inserted {
  background-color: #eaffea;
  color: #55a532;
}

.token.deleted {
  background-color: #ffecec;
  color: #bd2c00;
}

.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}


/* JSON */
.language-json .token.property {
  color: #183691;
}

.language-markup .token.tag .token.punctuation {
  color: #333;
}

/* CSS */
code.language-css,
.language-css .token.function {
  color: #0086b3;
}

/* YAML */
.language-yaml .token.atrule {
  color: #63a35c;
}

code.language-yaml {
  color: #183691;
}

/* Ruby */
.language-ruby .token.function {
  color: #333;
}

/* Markdown */
.language-markdown .token.url {
  color: #795da3;
}

/* Makefile */
.language-makefile .token.symbol {
  color: #795da3;
}

.language-makefile .token.variable {
  color: #183691;
}

.language-makefile .token.builtin {
  color: #0086b3;
}

/* Bash */
.language-bash .token.keyword {
  color: #0086b3;
}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
@page {
  size: A4 landscape;
}
 
      </style>
    </head>
    <body for="html-export">
      <div class="mume markdown-preview   ">
      <blockquote>
<p>消息队列（Message Queue）已然发展成为云计算中间件的重要组件，它具有低耦合、可靠投递、广播、流量控制、最终一致性等一系列特点。<br>
本文主要站在产品角度，探讨了消息队列常用的术语、应用场景以及成熟的中间件解决方案。最后以 AWS 为例，分析了云计算平台的消息中间件产品。</p>
</blockquote>
<h1 class="mume-header" id="%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E4%BA%A7%E5%93%81%E7%9F%A5%E8%AF%86">消息中间件产品知识</h1>

<h2 class="mume-header" id="%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E5%92%8C%E7%AE%80%E5%8D%95%E5%8E%9F%E7%90%86">基本概念和简单原理</h2>

<p>消息队列（Message Queue）是实现进程间或同一进程的不同线程间通信的方式。消息队列提供了异步的通信实现，发送者和使用者无需知道彼此的位置信息，即可独立处理消息。队列中的消息来自于发送者，可以驻留在内存或磁盘上，直到被使用者消费。<br>
消息队列中间件是分布式系统的重要组件，已经逐渐成为企业 IT 系统内部通信的核心手段，它具有低耦合、可靠投递、广播、流量控制、最终一致性等一系列功能，是异步 RPC 的主要手段之一。</p>
<p>消息队列常用术语：<br>
<strong>Broker</strong> 概念来自于 Apache ActiveMQ，可以理解为消息队列服务器，主要实现消息路由和暂存等功能<br>
<strong>消息生产者 Producer</strong> 向队列发送消息的应用程序<br>
<strong>消息消费者 Consumer</strong> 从队列接收消息的应用程序<br>
<strong>点对点模型 P2P</strong> 也可称作“生产消费模式”，在该模型下由生产者向队列发送消息，消费者从队列接收消息，并会在成功处理后返回消费签收确认（Acknowledge），系统可以有多个消费者，但每条消息只能被一个消费者消费，消息一旦被消费，便不再存在队列中。生产者和消费者没有时间上的依赖关系，生产者发送消息后，无论消费者有没有在运行，都不影响消息的后续消费。</p>
<blockquote>
<p>P2P 模型特点：单一消费者、消费应答机制、无时间依赖关系</p>
</blockquote>
<p><strong>发布者 Publisher</strong> 在发布订阅模型中，对消息生产者的称呼<br>
<strong>订阅者 Subscriber</strong> 在发布订阅模型中，对消息消费者的称呼<br>
<strong>话题 Topic</strong> 在发布订阅模型中，用于实现发布者和订阅者消息交换的标识，所有订阅了 Topic 的订阅者都可以收到对应的 Topic 消息<br>
<strong>发布订阅模型 Pub/Sub</strong> 也可称作“观察者模式”，支持了发布者和多个订阅者通过特定的话题（Topic）实现数据交换，当发布者发布（Publish） 一条 Topic 信息时，所有订阅（Subscribe）了该话题的订阅者都会接收到这条消息。消费者必须先订阅后才能消费发布者的消息，为了消费消息，订阅者必须保持运行的状态。</p>
<blockquote>
<p>Pub/Sub 模型特点：多个消费者、无消费应答、有时间依赖关系</p>
</blockquote>
<p><strong>消息的顺序性保证</strong> 生产消费模式下，利用 FIFO 先进先出的特性，可以保证消息的顺序性<br>
<strong>消息的 ACK 确认机制</strong> 生产消费模式提供了消息的 Acknowledge 机制，可以保证消息不丢失。当消费者确认消息处理完成后，发送一个 ACK 给消息队列，此时消息队列可以删除这个消息。如果消费者宕机/关闭，没有发送 ACK，消息队列将会把消息发送给其他消费者重新处理。<br>
<strong>消息的持久化</strong> 消息的持久化，对于一些关键的核心业务来说是非常重要的，启用消息持久化后，消息队列宕机重启后，消息可以从持久化存储恢复，消息不丢失，可以继续消费处理。<br>
<strong>消息的同步收发</strong> 消息同步发送时，发送方需要等待接收方的 ACK 确认，在收到 ACK 之前发送方将一直处于阻塞状态；消息接收方以同步方式（Pull）接收时，如果队列中为空，此时接收将处于同步阻塞状态，会一直等待，直到消息的到达。<br>
<strong>消息的异步收发</strong> 消息异步发送时，发送方不需要等待 ACK 确认；异步接收消息，消息队列以 Push 方式触发消费者接受消息。<br>
<strong>消息的事务支持</strong> 消息的收发处理支持事务管理，在任务中心场景中，一次处理可能涉及多个消息的接收、处理，这处于同一个事务范围，当事务中一个消息处理失败时，事务回滚，消息重新回到队列中。</p>
<h2 class="mume-header" id="%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">应用场景</h2>

<h3 class="mume-header" id="%E6%8F%90%E9%AB%98%E5%90%9E%E5%90%90%E9%87%8F">提高吞吐量</h3>

<p>在特定的一些业务场景下，消息队列的异步处理机制，可以降低业务请求的响应时间，提高吞吐量。</p>
<p><strong><em>场景举例：用户注册流程，注册成功后，发送注册邮件和注册短信</em></strong></p>
<p>传统串行处理<br>
<img src="http://chuantu.biz/t6/289/1524123900x-1404750322.png" alt="&#x4F20;&#x7EDF;&#x4E32;&#x884C;&#x5904;&#x7406;"><br>
传统并行处理<br>
<img src="http://chuantu.biz/t6/289/1524123928x-1404750322.png" alt="&#x4F20;&#x7EDF;&#x5E76;&#x884C;&#x5904;&#x7406;"><br>
引入消息队列，将一部分非必须的业务逻辑采用异步处理，改造后的架构如下：<br>
<img src="http://chuantu.biz/t6/289/1524123970x-1404750322.png" alt="&#x6D88;&#x606F;&#x961F;&#x5217;-&#x63D0;&#x9AD8;&#x541E;&#x5410;"><br>
通过将发送邮件、发送短信功能的异步处理，可以将注册流程的响应时间提升到 55ms。</p>
<p>假设 CPU 每秒的吞吐量是 100 次，则传统串行方式 1 秒内 CPU 可处理的请求量 6 次（1000/150），传统并行方式是 10 次（1000/100），异步处理则可以提升到 18 次（1000/55）。</p>
<h3 class="mume-header" id="%E4%B8%9A%E5%8A%A1%E8%A7%A3%E8%80%A6">业务解耦</h3>

<p>从上例应用可以看出，消息队列的异步处理机制能够有效的实现不同业务功能之间的解耦合。举例说明，在电子商务领域，常使用消息队列来实现 <strong>订单系统</strong> 与 <strong>库存系统</strong> 的解耦。业务系统的解耦合有很多好处，通俗来讲可以有效避免由于库存系统宕机等异常情况而导致的订单系统功能失败的情况。<br>
<img src="http://chuantu.biz/t6/289/1524124000x-1404750322.png" alt="&#x6D88;&#x606F;&#x961F;&#x5217;-&#x4E1A;&#x52A1;&#x89E3;&#x8026;"></p>
<h3 class="mume-header" id="%E6%B5%81%E9%87%8F%E5%89%8A%E5%B3%B0">流量削峰</h3>

<p>在业务解耦的同时，利用队列的容量上限，可以实现对激增流量的削峰处理。我们知道，在面对激增的访问请求时，上下游的处理能力是不一样的。例如，Web 前端可以通过 Nginx 搭配负载均衡设备实现每秒上千万的并发请求，但数据库的处理能力却非常有限，SSD 加分库分表的单机处理能力只在万级别。</p>
<p>因此在有激增流量的场景下，为了避免激增的请求导致应用宕机，通常会采用消息队列，实现上下游系统的内容转储。例如在秒杀或团抢活动，应用非常广泛，主要有以下几点好处：</p>
<ul>
<li>可以控制活动人数。用户的请求服务器接收后，首先写入消息队列。假如消息队列长度超过最大数量，则直接抛弃用户请求并跳转到失败页面</li>
<li>可以缓冲瞬间激增的高流量</li>
<li>可以实现用户请求和订单业务系统的异步处理</li>
</ul>
<h3 class="mume-header" id="%E5%B9%BF%E6%92%AD">广播</h3>

<p>利用 Pub/Sub 模式，可以轻松实现消息的广播。在传统实现下，若不采用消息队列，每当接入一个新的业务方，势必需要进行一次接口联调，降低效率也徒增系统的不稳定性。引入消息队列后，消息生产者只需要确保消息准确送达到队列，下游的消费者自行维护订阅即可。<br>
<img src="http://chuantu.biz/t6/289/1524124018x-1404750322.png" alt="&#x6D88;&#x606F;&#x961F;&#x5217;-&#x5E7F;&#x64AD;"><br>
<strong><em>使用时，注意 Pub/Sub 模式的时间依赖性</em></strong></p>
<h3 class="mume-header" id="%E6%9C%80%E7%BB%88%E4%B8%80%E8%87%B4%E6%80%A7">最终一致性</h3>

<p>最终一致性指的是两个系统的状态保持一致，要么都成功、要么都失败。是分布式系统的数据同步、金融/电商领域资金流转系统的重要考虑点。</p>
<p>利用消息队列实现最终一致性的方法可以简要描述为：主要利用“记录”和“补偿”的方式，在事情成功完成之前，始终记录事情的详情，直到收到接收方的“成功”应答后，再清理掉事情记录。对于失败和超时情况，则依靠定时任务实现重复调取，直到成功为止。</p>
<p>具体来说，本地事务维护业务变化和通知消息，一起落地（失败则一起回滚），然后 RPC 到达 Broker，在 Broker 成功落地后，RPC 返回成功，本地消息可以删除。否则本地消息一直靠定时任务轮询不断重发，这样就保证了消息可靠落地 Broker；Broker 往 Consumer 发送消息的过程类似，一直发送消息，直到 Consumer 发送消费成功确认。<br>
通过两次消息落地加补偿，下游是一定可以收到消息的，然后依赖 RPC 版本号等方式做判重，更新自己的业务，就实现了最终一致性。</p>
<h2 class="mume-header" id="%E5%B8%B8%E7%94%A8%E7%9A%84%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6">常用的消息中间件</h2>

<p>JMS ( Java Message Service ) API 作为消息服务的规范，可以在商用的容器上（如 WebLogic、JBoss）直接使用开发。此次讨论范围仅限于 Active MQ、Rabbit MQ、Kafka 三类云计算常用的消息中间件产品。</p>
<h3 class="mume-header" id="activemq">ActiveMQ</h3>

<p>ActiveMQ 是 Apache 出品，能力强劲的开源消息总线，是完全支持 JMS1.1 和 J2EE 1.4 规范的 JMS Provider 实现。<br>
ActiveMQ 的主要特性有：</p>
<ul>
<li>多种语音和协议编写客户端，语言：Java, C, C++, C#, Ruby, Perl, Python, PHP。应用协议：OpenWire, Stomp REST, MQTT, XMPP, AMQP, WS Notification</li>
<li>对 Spring 的支持，ActiveMQ 可以很容易内嵌到使用 Spring 的系统里面去，而且也支持 Spring2.0 的特性</li>
<li>从设计上保证了高性能的集群，客户端-服务器，点对点</li>
<li>支持多种传送协议：in-VM, TCP, SSL, NIO, UDP, JGroups, JXTA</li>
</ul>
<h3 class="mume-header" id="rabbitmq">RabbitMQ</h3>

<p>RabbitMQ 是基于 Erlang 语言编写的开源消息队列，是 AMQP 的标准实现。支持多种客户端，如：Python、Ruby、.NET、Java、JMS、C、PHP、ActionScript、XMPP、STOMP等，支持 AJAX，持久化。RabbitMQ 实现了代理（Broker）架构，消息在发送到客户端之前可以在中央节点上排队，用于在分布式系统中存储转发消息，在适宜于路由、负载均衡、消息持久化等场景。但相应的因为中央节点而增加了延迟，以及消息封装后也比较大，导致 RabbitMQ 的速度较慢。Erlang 环境也使得可扩展性不好。<br>
<strong><em>场景应用：记账重试失败、通知服务等，消息不允许丢失的条件下使用</em></strong></p>
<h3 class="mume-header" id="kafka">Kafka</h3>

<p>Kafka 是 LinkedIn 于2010年12月开发并开源的一个分布式流平台，现在是Apache的顶级项目，它是一种 <strong>高性能跨语言的分布式 Pub/Sub</strong> 消息系统，它可以处理客户在网站中的所有动作流数据（如网页浏览、搜索以及其他用户的行为）。由于吞吐量的限制要求，这些数据通常是通过处理日志和日志聚合来获取的。 对于像 Hadoop 的一样的日志数据离线分析系统，又要求实时处理，这是一个可行的解决方案。Kafka 的目的是通过 Hadoop 的并行加载机制来统一线上和离线的消息处理，也是为了通过集群机来提供实时的消费。</p>
<p>作为高吞吐量的分布式发布/订阅消息系统，Kafka 有如下特性：</p>
<ul>
<li>通过O(1)的磁盘数据结构提供消息的持久化，这种结构对于 TB 级别的消息也能够保持长时间的稳定存储（以文件追加的方式写入数据，过期的数据定期删除）。</li>
<li>高吞吐量：Kafka 可以支持每秒数百万并发数</li>
<li>支持通过 Kafka 服务器和消费机集群来分区消息</li>
<li>支持 Hadoop 并行数据加载<br>
<strong><em>场景应用：一般应用在大数据日志处理，或对实时性、可靠性要求稍低的场景（可能会有少量延迟和丢数据）</em></strong></li>
</ul>
<h2 class="mume-header" id="amazon-%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E4%BA%A7%E5%93%81%E4%BB%8B%E7%BB%8D">Amazon 消息队列产品介绍</h2>

<h3 class="mume-header" id="amazon-mq">Amazon MQ</h3>

<p>一种适用于 Apache ActiveMQ 的托管消息代理服务，Amazon MQ 负责管理和维护 ActiveMQ 其底层基础设施经过自动预置，具备高可用性和消息持久性，能够保证应用程序的可靠性。</p>
<p><strong><em>支持行业标准 API 和协议，适用于产品中已经使用了消息队列，而希望将 Broker 上云的客户</em></strong></p>
<h3 class="mume-header" id="amazon-sqs">Amazon SQS</h3>

<p>Amazon Simple Quene Service 是一款 Web 服务，提供了应用程序接入消息队列的功能。Amazon SQS 所提供的可靠且可扩展的托管队列，为构建解耦合的分布式应用程序提供便利。</p>
<p><strong><em>适用于在云中构建全新的应用程序，SQS 是一种采用 P2P 模式的消息队列，提供了无时间依赖关系的消息队列</em></strong></p>
<h3 class="mume-header" id="amazon-sns">Amazon SNS</h3>

<p>Amazon Simple Notification Service 是一种让用户能够轻松构建、维护并从云中发送通知的 Web 服务。该服务旨在让开发人员能更轻松的进行互联网规模计算。</p>
<p><strong><em>适用于在云中构建全新的应用程序，SNS 是一种采用 Pub/Sub 模式的消息队列，提供了无需轮询的消息队列</em></strong></p>
<h3 class="mume-header" id="%E4%B8%AA%E4%BA%BA%E7%90%86%E8%A7%A3">个人理解</h3>

<ol>
<li>Amazon MQ 产品主要解决用户已有产品的消息队列代理服务移植上云的需求，利用分布式系统提供可以扩展的计算资源。因此产品的主要关注性能就是兼容性和可托管。这也正是产品基于 ActiveMQ 而非 Kafka 或 RabbitMQ 的原因（ActiveMQ 支持多种开发语言和协议，也更适合高性能的集群）</li>
<li>对于可以从零开始，开发产品的客户，Amazon 提供了 SQS、SNS 的消息队列服务</li>
<li>SQS 和 SNS 两款产品分别采用了点对点模式和发布/订阅模式的消息队列，就可以满足不同业务需求的客户。对于客户来讲，这是两款开箱即用的消息队列产品，同时也能更好的与 AWS 其他产品搭配使用，比如和 Lambda、Cloud Watch等。</li>
</ol>
<h2 class="mume-header" id="%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">参考资料</h2>

<ul>
<li><a href="https://blog.csdn.net/liuxinghao/article/details/60875715">常用消息队列对比</a></li>
<li><a href="http://www.cnblogs.com/tianqing/p/7110468.html">再谈消息队列技术</a></li>
<li><a href="https://blog.csdn.net/ntotl/article/details/72765713">消息队列使用的四种场景</a></li>
<li><a href="https://tech.meituan.com/mq-design.html">消息队列设计精要</a></li>
<li><a href="https://blog.csdn.net/lizhitao/article/details/47723105">消息队列中点对点与发布订阅区别</a></li>
</ul>

      </div>
      <div class="md-sidebar-toc"><ul>
<li><a href="#%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E4%BA%A7%E5%93%81%E7%9F%A5%E8%AF%86">消息中间件产品知识</a>
<ul>
<li><a href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E5%92%8C%E7%AE%80%E5%8D%95%E5%8E%9F%E7%90%86">基本概念和简单原理</a></li>
<li><a href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">应用场景</a>
<ul>
<li><a href="#%E6%8F%90%E9%AB%98%E5%90%9E%E5%90%90%E9%87%8F">提高吞吐量</a></li>
<li><a href="#%E4%B8%9A%E5%8A%A1%E8%A7%A3%E8%80%A6">业务解耦</a></li>
<li><a href="#%E6%B5%81%E9%87%8F%E5%89%8A%E5%B3%B0">流量削峰</a></li>
<li><a href="#%E5%B9%BF%E6%92%AD">广播</a></li>
<li><a href="#%E6%9C%80%E7%BB%88%E4%B8%80%E8%87%B4%E6%80%A7">最终一致性</a></li>
</ul>
</li>
<li><a href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6">常用的消息中间件</a>
<ul>
<li><a href="#activemq">ActiveMQ</a></li>
<li><a href="#rabbitmq">RabbitMQ</a></li>
<li><a href="#kafka">Kafka</a></li>
</ul>
</li>
<li><a href="#amazon-%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E4%BA%A7%E5%93%81%E4%BB%8B%E7%BB%8D">Amazon 消息队列产品介绍</a>
<ul>
<li><a href="#amazon-mq">Amazon MQ</a></li>
<li><a href="#amazon-sqs">Amazon SQS</a></li>
<li><a href="#amazon-sns">Amazon SNS</a></li>
<li><a href="#%E4%B8%AA%E4%BA%BA%E7%90%86%E8%A7%A3">个人理解</a></li>
</ul>
</li>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">参考资料</a></li>
</ul>
</li>
</ul>
</div>
      <a id="sidebar-toc-btn">≡</a>
    </body>
    
    
    
    
    
    
    
<script>
document.body.setAttribute('html-show-sidebar-toc', true)
var sidebarTOCBtn = document.getElementById('sidebar-toc-btn')
sidebarTOCBtn.addEventListener('click', function(event) {
  event.stopPropagation()
  if (document.body.hasAttribute('html-show-sidebar-toc')) {
    document.body.removeAttribute('html-show-sidebar-toc')
  } else {
    document.body.setAttribute('html-show-sidebar-toc', true)
  }
})
</script>
      
  </html>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/04/17/消息队列产品知识/" rel="next" title="消息中间件产品知识">
                <i class="fa fa-chevron-left"></i> 消息中间件产品知识
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">大钳子</p>
              <p class="site-description motion-element" itemprop="description">这是关于笔者的生活点滴记录，希望能透过这些反应大时代下的个人发展轨迹。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/truegate" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i></a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:lens.cheng@outlook.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i></a>
                  </span>
                
            </div>
          

          
          

          
          

          <!-- <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=450 src="//music.163.com/outchain/player?type=0&id=442655312&auto=1&height=430"></iframe> -->
        
        </div>
        
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E4%BA%A7%E5%93%81%E7%9F%A5%E8%AF%86"><span class="nav-number">1.</span> <span class="nav-text">消息中间件产品知识</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E5%92%8C%E7%AE%80%E5%8D%95%E5%8E%9F%E7%90%86"><span class="nav-number">1.1.</span> <span class="nav-text">基本概念和简单原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-number">1.2.</span> <span class="nav-text">应用场景</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%90%E9%AB%98%E5%90%9E%E5%90%90%E9%87%8F"><span class="nav-number">1.2.1.</span> <span class="nav-text">提高吞吐量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%9A%E5%8A%A1%E8%A7%A3%E8%80%A6"><span class="nav-number">1.2.2.</span> <span class="nav-text">业务解耦</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%81%E9%87%8F%E5%89%8A%E5%B3%B0"><span class="nav-number">1.2.3.</span> <span class="nav-text">流量削峰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B9%BF%E6%92%AD"><span class="nav-number">1.2.4.</span> <span class="nav-text">广播</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%80%E7%BB%88%E4%B8%80%E8%87%B4%E6%80%A7"><span class="nav-number">1.2.5.</span> <span class="nav-text">最终一致性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="nav-number">1.3.</span> <span class="nav-text">常用的消息中间件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#activemq"><span class="nav-number">1.3.1.</span> <span class="nav-text">ActiveMQ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rabbitmq"><span class="nav-number">1.3.2.</span> <span class="nav-text">RabbitMQ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#kafka"><span class="nav-number">1.3.3.</span> <span class="nav-text">Kafka</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#amazon-%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E4%BA%A7%E5%93%81%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.4.</span> <span class="nav-text">Amazon 消息队列产品介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#amazon-mq"><span class="nav-number">1.4.1.</span> <span class="nav-text">Amazon MQ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#amazon-sqs"><span class="nav-number">1.4.2.</span> <span class="nav-text">Amazon SQS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#amazon-sns"><span class="nav-number">1.4.3.</span> <span class="nav-text">Amazon SNS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%AA%E4%BA%BA%E7%90%86%E8%A7%A3"><span class="nav-number">1.4.4.</span> <span class="nav-text">个人理解</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="nav-number">1.5.</span> <span class="nav-text">参考资料</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
    <!-- custom -->
    <div class="sidebar-inner">
    <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=450 src="//music.163.com/outchain/player?type=0&id=442655312&auto=1&height=430"></iframe>
    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-superpowers"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">大钳子</span>

  
</div>






  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a></div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  

    
      <script id="dsq-count-scr" src="https://truegate.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'http://yoursite.com/2018/04/19/消息队列产品知识/';
          this.page.identifier = '2018/04/19/消息队列产品知识/';
          this.page.title = '';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://truegate.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  














  





  

  

  

  
  

  

  

  

</body>
</html>
